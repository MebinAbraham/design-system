{% macro patternlibExample(params) %}
    {% set params = helpers.generateExampleParams(params, helpers.addDependency) %}
    <div class="patternlib-example js-example">
        <div class="patternlib-example__header">
            <a href="{{ params.link }}" target="_blank" class="patternlib-example__header-link external-link u-fs-s">Open this example in a new tab
            <svg id="external-link" class="svg-icon" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.5,9H13a.5.5,0,0,0-.5.5v3h-9v-9h3A.5.5,0,0,0,7,3V2.5A.5.5,0,0,0,6.5,2h-4a.5.5,0,0,0-.5.5v11a.5.5,0,0,0,.5.5h11a.5.5,0,0,0,.5-.5v-4A.5.5,0,0,0,13.5,9Z" transform="translate(-2 -1.99)" />
                <path d="M8.83,7.88a.51.51,0,0,0,.71,0l2.31-2.32,1.28,1.28A.51.51,0,0,0,14,6.49v-4a.52.52,0,0,0-.5-.5h-4A.51.51,0,0,0,9,2.52a.58.58,0,0,0,.14.33l1.28,1.28L8.12,6.46a.51.51,0,0,0,0,.71Z" transform="translate(-2 -1.99)" />
            </svg>
            </a>
        </div>
        <div class="patternlib-example__frame">
            <iframe class="patternlib-example__iframe" frameborder="0" scrolling="auto" src="{{ params.link }}" style="background-color: {{ params.backgroundColor | default ('#fff') }}"></iframe>
        </div>
        <div class="patternlib-example__source">
            <input id="{{ params.name }}-html" type="radio" class="patternlib-example__radio js-example-radio" name="{{ params.name }}-example" {% if params.openTab == "html" %} checked {% endif %}>
            {% if params.raw is defined and params.raw %}
                <input id="{{ params.name }}-nunjucks" type="radio" class="patternlib-example__radio js-example-radio" name="{{ params.name }}-example" {% if params.openTab == "nunjucks" %} checked {% endif %}>
            {% endif %}
            {% if params.template is defined and params.template %}
                <input id="{{ params.name }}-template" type="radio" class="patternlib-example__radio js-example-radio" name="{{ params.name }}-example" {% if params.openTab == "template" %} checked {% endif %}>
            {% endif %}
            {% if params.scss is defined and params.scss %}
                <input id="{{ params.name }}-scss" type="radio" class="patternlib-example__radio js-example-radio" name="{{ params.name }}-example"{% if params.openTab == "scss" %} checked {% endif %}>
            {% endif %}
            {% if params.noTabs is not defined %}
                <div class="patternlib-example__tabs">
                    {% if params.noHTMLTab is not defined %}
                        <label class="patternlib-example__tab u-fs-r--b js-example-tab" for="{{ params.name }}-html">HTML</label>
                    {% endif %}
                    {% if params.raw is defined and params.raw and not params.noRawTab %}
                        <label class="patternlib-example__tab u-fs-r--b js-example-tab" for="{{ params.name }}-nunjucks">Nunjucks</label>
                    {% endif %}
                    {% if params.template is defined and params.template and not params.noTemplateTab %}
                        <label class="patternlib-example__tab u-fs-r--b js-example-tab" for="{{ params.name }}-template">Nunjucks Template</label>
                    {% endif %}
                    {% if params.scss is defined and params.scss and not params.noScssTab %}
                        <label class="patternlib-example__tab u-fs-r--b js-example-tab" for="{{ params.name }}-scss">SCSS</label>
                    {% endif %}
                </div>
            {% endif %}
            {% from "components/code-highlight/_macro.njk" import onsCodeHighlight %}
            <div class="patternlib-example__panels">
                <div class="patternlib-example__panel">
                    {{ onsCodeHighlight({ "code": params.html }) }}
                </div>
                {%- if params.raw -%}
                <div class="patternlib-example__panel">
                    {% if params.options is defined and params.options %}
                        <details class="macro-options">
                            <summary class="macro-options__summary">Nunjucks macro options</summary>
                            <div class="macro-options__content">{{ params.options | safe }}</div>
                        </details>
                    {% endif %}
                    {{ onsCodeHighlight({ "code": params.raw, "language": "javascript" }) }}
                </div>
                {%- endif -%}
                {%- if params.template -%}
                    <div class="patternlib-example__panel">
                        {{ onsCodeHighlight({ "code": params.template }) }}
                    </div>
                {%- endif -%}
                {%- if params.scss -%}
                    <div class="patternlib-example__panel">
                        {{ onsCodeHighlight({ "code": params.scss, "language": "css" }) }}
                    </div>
                {%- endif -%}
            </div>
        </div>
    </div>
{% endmacro %}
